<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Capy Dash</title>
    <style>
        :root {
            --neon: #00f2ff;
            --danger: #ff0055;
            --win: #00ff99;
            --bg: #050505;
        }

        body {
            margin: 0;
            background-color: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Arial Black', sans-serif;
            overflow: hidden;
            user-select: none;
        }

        #escenario {
            width: 1000px;
            height: 500px;
            background: radial-gradient(circle at center, #1b2735 0%, #050505 100%);
            position: relative;
            border: 6px solid #222;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0,0,0,0.9);
        }

        #suelo {
            position: absolute;
            bottom: 60px;
            width: 100%;
            height: 4px;
            background: var(--neon);
            box-shadow: 0 0 20px var(--neon);
            z-index: 5;
        }

        #capybara {
            width: 160px; 
            height: 160px;
            position: absolute;
            bottom: 31px; 
            left: 100px;
            background-image: url('img/capibaraSkins/capybaraJuego.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom center;
            z-index: 10;
        }

        .espina {
            width: 60px;
            height: 70px;
            background-color: var(--danger);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            position: absolute;
            bottom: 60px;
            right: -100px;
        }

        /* --- ANIMACIONES --- */
        .salto { animation: saltoFisico 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes saltoFisico {
            0% { bottom: 31px; }
            45% { bottom: 280px; transform: rotate(-5deg); }
            100% { bottom: 31px; transform: rotate(0deg); }
        }

        .mover-obs { animation: moverObstaculo 1.5s infinite linear; }
        @keyframes moverObstaculo {
            from { right: -100px; }
            to { right: 110%; }
        }

        /* --- MODALES --- */
        .modal {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.96);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            text-align: center;
        }

        .titulo-grande {
            font-size: 85px;
            color: var(--neon);
            text-shadow: 0 0 25px var(--neon);
            margin: 0 0 30px 0;
            text-transform: uppercase;
        }

        /* CARDS */
        .cards-container {
            display: flex;
            gap: 20px;
            margin-bottom: 35px;
            justify-content: center;
        }

        .card {
            background: #111;
            border: 3px solid var(--neon);
            border-radius: 20px;
            padding: 20px;
            width: 180px;
            box-shadow: 0 8px 0 var(--neon);
        }

        .card-skin {
            cursor: pointer;
            transition: 0.2s;
        }

        .card-skin:hover { transform: scale(1.05); }
        .card-skin.active { border-color: var(--win); box-shadow: 0 8px 0 var(--win); }

        .skin-preview { width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px; }

        /* BOTONES GAMING UNIFICADOS */
        .btn-game {
            background: var(--neon);
            color: #000;
            border: none;
            border-bottom: 8px solid #008899;
            padding: 18px 0; /* Padding vertical fijo */
            width: 320px;    /* ANCHO UNIFICADO */
            font-family: 'Arial Black', sans-serif;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 12px;
            text-transform: uppercase;
            margin: 10px;
            transition: transform 0.2s, filter 0.2s, border-bottom 0.1s;
            display: block;
        }

        /* Efecto al pasar el cursor */
        .btn-game:hover {
            transform: scale(1.05);
            filter: brightness(1.15);
        }

        .btn-game:active {
            border-bottom-width: 0px;
            transform: translateY(8px) scale(1.02);
        }

        /* Colores secundarios manteniendo el tama√±o */
        .btn-small { background: #333; border-bottom-color: #111; color: white; }
        .btn-skin { background: #ffaa00; border-bottom-color: #b37700; }
        .btn-win { background: var(--win); border-bottom-color: #008855; }

        #puntos {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            font-size: 80px;
            color: white;
            opacity: 0.1;
        }
    </style>
</head>
<body onkeydown="manejarTeclado(event)">

    <div id="escenario">
        <div id="puntos">0</div>
        <div id="suelo"></div>
        <div id="capybara"></div>
        <div id="obstaculo" class="espina"></div>

        <div id="menu-inicio" class="modal">
            <h1 class="titulo-grande">CAPY DASH</h1>
            <button class="btn-game" onclick="iniciarJuego(event)">¬°JUGAR!</button>
            <button class="btn-game btn-skin" onclick="abrirSkins()">Skins</button>
            <button class="btn-game btn-small" onclick="abrirInstrucciones()">Instrucciones</button>
        </div>

        <div id="menu-skins" class="modal" style="display:none;">
            <h2 class="titulo-grande" style="font-size: 50px;">ELIGE TU SKIN</h2>
            <div class="cards-container">
                <div class="card card-skin active" onclick="cambiarSkin(0, this)">
                    <img src="img/capibaraSkins/capybaraJuego.png" class="skin-preview">
                    <p>CL√ÅSICO</p>
                </div>
                <div class="card card-skin" onclick="cambiarSkin(1, this)">
                    <img src="img/capibaraSkins/capyGirl.png" class="skin-preview">
                    <p>CAPYCHICA</p>
                </div>
                <div class="card card-skin" onclick="cambiarSkin(2, this)">
                    <img src="img/capibaraSkins/capyNinja.png" class="skin-preview">
                    <p>NINJA</p>
                </div>
                <div class="card card-skin" onclick="cambiarSkin(3, this)">
                    <img src="img/capibaraSkins/capyElegante.png" class="skin-preview">
                    <p>ELEGANTE</p>
                </div>
            </div>
            <button class="btn-game" onclick="cerrarSkins()">CONFIRMAR</button>
        </div>

        <div id="menu-instrucciones" class="modal" style="display:none;">
            <h2 class="titulo-grande" style="font-size: 60px;">C√ìMO JUGAR</h2>
            <div class="cards-container">
                <div class="card">
                    <span style="font-size:45px;">‚å®Ô∏è</span>
                    <p>Usa <b>ESPACIO</b><br>para saltar</p>
                </div>
                <div class="card">
                    <span style="font-size:45px;">üñ±Ô∏è</span>
                    <p>Haz <b>CLIC</b><br>para saltar</p>
                </div>
                <div class="card" style="border-color: var(--win); box-shadow: 0 8px 0 var(--win);">
                    <span style="font-size:45px;">üèÜ</span>
                    <p>Llega a <b>500 puntos</b><br>para ganar</p>
                </div>
            </div>
            <button class="btn-game" onclick="cerrarInstrucciones()">ENTENDIDO</button>
        </div>

        <div id="game-over" class="modal" style="display:none;">
            <h1 style="color:var(--danger); text-shadow: 4px 4px 0px #400, 0 0 25px var(--danger); font-size: 75px; margin:0;">¬°CAPI-CHOCASTE!</h1>
            <p id="score-final" style="font-size: 30px; margin: 30px 0;">Lograste: 0 puntos</p>
            <button class="btn-game" onclick="location.reload()">REINTENTAR</button>
        </div>

        <div id="victoria" class="modal" style="display:none;">
            <h1 style="color:var(--win); text-shadow: 0 0 30px var(--win); font-size:75px;">¬°HAS GANADO!</h1>
            <p style="font-size:35px;">¬°Gracias por visitar mi portafolio!</p>
            <button class="btn-game btn-win" onclick="location.reload()">REPETIR</button>
        </div>
    </div>

    <script>
        const capybara = document.getElementById("capybara");
        const obstaculo = document.getElementById("obstaculo");
        const marcador = document.getElementById("puntos");
        
        let score = 0;
        let vivo = false;
        let puedeSaltar = false; 
        const META = 500;

        const skins = ['img/capibaraSkins/capybaraJuego.png', 'img/capibaraSkins/capyGirl.png', 'img/capibaraSkins/capyNinja.png', 'img/capibaraSkins/capyElegante.png'];

        function abrirSkins() { document.getElementById("menu-inicio").style.display = "none"; document.getElementById("menu-skins").style.display = "flex"; }
        function cerrarSkins() { document.getElementById("menu-skins").style.display = "none"; document.getElementById("menu-inicio").style.display = "flex"; }
        function cambiarSkin(index, elemento) {
            capybara.style.backgroundImage = `url('${skins[index]}')`;
            document.querySelectorAll('.card-skin').forEach(c => c.classList.remove('active'));
            elemento.classList.add('active');
        }

        function abrirInstrucciones() { document.getElementById("menu-inicio").style.display = "none"; document.getElementById("menu-instrucciones").style.display = "flex"; }
        function cerrarInstrucciones() { document.getElementById("menu-instrucciones").style.display = "none"; document.getElementById("menu-inicio").style.display = "flex"; }

        function iniciarJuego(event) {
            if(event) event.stopPropagation();
            document.getElementById("menu-inicio").style.display = "none";
            vivo = true;
            obstaculo.classList.add("mover-obs");
            setTimeout(() => { puedeSaltar = true; document.body.onclick = saltar; }, 150);
        }

        function manejarTeclado(e) { if(e.code === "Space") { e.preventDefault(); saltar(); } }

        function saltar() {
            if (vivo && puedeSaltar && !capybara.classList.contains("salto")) {
                capybara.classList.add("salto");
                capybara.addEventListener('animationend', () => { capybara.classList.remove("salto"); }, {once: true});
            }
        }

        const loop = setInterval(() => {
            if (!vivo) return;
            const c = capybara.getBoundingClientRect();
            const o = obstaculo.getBoundingClientRect();
            if (c.right - 55 > o.left && c.left + 55 < o.right && c.bottom > o.top + 5) {
                vivo = false; puedeSaltar = false;
                obstaculo.style.animationPlayState = "paused";
                document.getElementById("score-final").innerText = "Lograste: " + Math.floor(score / 10) + " puntos";
                document.getElementById("game-over").style.display = "flex";
            } else {
                score++;
                marcador.innerText = Math.floor(score / 10);
                if (Math.floor(score / 10) >= META) {
                    vivo = false; puedeSaltar = false;
                    obstaculo.style.animationPlayState = "paused";
                    document.getElementById("victoria").style.display = "flex";
                }
            }
        }, 10);
    </script>
</body>
</html>